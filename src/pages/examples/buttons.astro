---
import Layout from '@/layouts/Layout.astro';
import Button from '@/components/button/Button.astro';
---
<Layout>
  <main class="min-h-screen bg-background text-foreground p-8">
    <div class="max-w-6xl mx-auto space-y-12">
      <header>
          <h1 class="heading-1">Button Component Examples</h1>
        <p class="text-muted-foreground">
          Demonstrating button variants with the new color system using OKLCH colors
        </p>
      </header>

      <!-- Variants Section -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Variants</h2>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary">Primary Button</Button>
          <Button variant="secondary">Secondary Button</Button>
          <Button variant="accent">Accent Button</Button>
          <Button variant="outline">Outline Button</Button>
          <Button variant="ghost">Ghost Button</Button>
          <Button variant="link">Link Button</Button>
        </div>
      </section>

      <!-- Sizes Section -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Sizes</h2>
        <div class="flex flex-wrap items-center gap-4">
          <Button variant="primary" size="sm">Small</Button>
          <Button variant="primary" size="default">Default</Button>
          <Button variant="primary" size="lg">Large</Button>
        </div>
      </section>

      <!-- Link Buttons -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Link Buttons</h2>
        <p class="text-sm text-muted-foreground">
          Buttons can render as <code class="bg-muted px-1.5 py-0.5 rounded text-xs">&lt;a&gt;</code> tags when using the <code class="bg-muted px-1.5 py-0.5 rounded text-xs">href</code> prop
        </p>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" href="/about">About Page</Button>
          <Button variant="secondary" href="/contact">Contact</Button>
          <Button variant="accent" href="/gallery">View Gallery</Button>
          <Button variant="outline" href="/blog">Blog</Button>
        </div>
      </section>

      <!-- External Links with Security -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">External Links (with Security)</h2>
        <p class="text-sm text-muted-foreground">
          External links with <code class="bg-muted px-1.5 py-0.5 rounded text-xs">target="_blank"</code> automatically get <code class="bg-muted px-1.5 py-0.5 rounded text-xs">rel="noopener noreferrer"</code>
        </p>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" href="https://example.com" target="_blank">
            External Link
          </Button>
          <Button variant="secondary" href="https://github.com" target="_blank">
            GitHub
          </Button>
          <Button variant="link" href="https://docs.astro.build" target="_blank">
            Documentation →
          </Button>
        </div>
      </section>

      <!-- Disabled Links -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Disabled Links</h2>
        <p class="text-sm text-muted-foreground">
          Links with <code class="bg-muted px-1.5 py-0.5 rounded text-xs">disabled</code> prop use <code class="bg-muted px-1.5 py-0.5 rounded text-xs">aria-disabled</code> and <code class="bg-muted px-1.5 py-0.5 rounded text-xs">pointer-events-none</code>
        </p>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" href="/page" disabled>Disabled Link</Button>
          <Button variant="secondary" href="/page" disabled>Disabled Link</Button>
          <Button variant="outline" href="/page" disabled>Disabled Link</Button>
        </div>
      </section>

      <!-- All Variants with All Sizes -->
      <section class="space-y-6">
        <h2 class="text-2xl font-semibold text-foreground">All Variants × All Sizes</h2>
        
        <div class="space-y-4">
          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Primary</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="primary" size="sm">Small</Button>
              <Button variant="primary" size="default">Default</Button>
              <Button variant="primary" size="lg">Large</Button>
            </div>
          </div>

          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Secondary</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="secondary" size="sm">Small</Button>
              <Button variant="secondary" size="default">Default</Button>
              <Button variant="secondary" size="lg">Large</Button>
            </div>
          </div>

          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Accent</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="accent" size="sm">Small</Button>
              <Button variant="accent" size="default">Default</Button>
              <Button variant="accent" size="lg">Large</Button>
            </div>
          </div>

          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Outline</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="outline" size="sm">Small</Button>
              <Button variant="outline" size="default">Default</Button>
              <Button variant="outline" size="lg">Large</Button>
            </div>
          </div>

          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Ghost</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="ghost" size="sm">Small</Button>
              <Button variant="ghost" size="default">Default</Button>
              <Button variant="ghost" size="lg">Large</Button>
            </div>
          </div>

          <div>
            <h3 class="text-sm font-medium text-muted-foreground mb-2">Link</h3>
            <div class="flex flex-wrap items-center gap-3">
              <Button variant="link" size="sm">Small</Button>
              <Button variant="link" size="default">Default</Button>
              <Button variant="link" size="lg">Large</Button>
            </div>
          </div>
        </div>
      </section>

      <!-- Disabled State -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Disabled State</h2>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" disabled>Disabled Primary</Button>
          <Button variant="secondary" disabled>Disabled Secondary</Button>
          <Button variant="accent" disabled>Disabled Accent</Button>
          <Button variant="outline" disabled>Disabled Outline</Button>
          <Button variant="ghost" disabled>Disabled Ghost</Button>
          <Button variant="link" disabled>Disabled Link</Button>
        </div>
      </section>

      <!-- Button Types -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Button Types</h2>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" type="button">Button</Button>
          <Button variant="secondary" type="submit">Submit</Button>
          <Button variant="outline" type="reset">Reset</Button>
        </div>
      </section>

      <!-- Custom Classes -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">With Custom Classes</h2>
        <div class="flex flex-wrap gap-4">
          <Button variant="primary" class="w-full md:w-auto">Full Width on Mobile</Button>
          <Button variant="secondary" class="shadow-xl">With Extra Shadow</Button>
          <Button variant="accent" class="uppercase tracking-wide">Uppercase</Button>
          <Button variant="outline" class="min-w-32">Min Width</Button>
        </div>
      </section>

      <!-- Color System Reference -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Color System Reference</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Primary -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-primary rounded flex items-center justify-center">
              <span class="text-primary-foreground font-semibold">Primary</span>
            </div>
            <div class="h-12 bg-primary-muted rounded flex items-center justify-center">
              <span class="text-primary-foreground text-sm">Primary Muted</span>
            </div>
          </div>

          <!-- Secondary -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-secondary rounded flex items-center justify-center">
              <span class="text-secondary-foreground font-semibold">Secondary</span>
            </div>
            <div class="h-12 bg-secondary-muted rounded flex items-center justify-center">
              <span class="text-secondary-foreground text-sm">Secondary Muted</span>
            </div>
          </div>

          <!-- Accent -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-accent rounded flex items-center justify-center">
              <span class="text-accent-foreground font-semibold">Accent</span>
            </div>
          </div>

          <!-- Background -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-background rounded flex items-center justify-center border border-border">
              <span class="text-foreground font-semibold">Background</span>
            </div>
            <div class="h-12 bg-background-bright rounded flex items-center justify-center">
              <span class="text-foreground text-sm">Background Bright</span>
            </div>
          </div>

          <!-- Muted -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-muted rounded flex items-center justify-center">
              <span class="text-muted-foreground font-semibold">Muted</span>
            </div>
          </div>

          <!-- Link -->
          <div class="border border-border rounded-lg p-4 space-y-2">
            <div class="h-16 bg-link rounded flex items-center justify-center">
              <span class="text-background font-semibold">Link Color</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Usage Examples -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">Usage Examples</h2>
        <div class="bg-card text-card-foreground p-6 rounded-lg border border-border">
          <pre class="text-sm overflow-x-auto"><code>{`<!-- Basic button -->
<Button variant="primary">Click me</Button>

<!-- Submit button -->
<Button variant="primary" type="submit">Submit Form</Button>

<!-- Link button (renders as <a>) -->
<Button variant="primary" href="/about">About Page</Button>

<!-- External link (auto-adds rel="noopener noreferrer") -->
<Button variant="secondary" href="https://example.com" target="_blank">
  External Link
</Button>

<!-- Disabled button -->
<Button variant="accent" disabled>Can't Click</Button>

<!-- Disabled link (uses aria-disabled) -->
<Button variant="primary" href="/page" disabled>
  Disabled Link
</Button>

<!-- With size -->
<Button variant="secondary" size="lg">Large Button</Button>

<!-- With custom classes -->
<Button variant="outline" class="w-full">Full Width</Button>

<!-- Link variant -->
<Button variant="link" href="/learn-more">Learn more</Button>`}</code></pre>
        </div>
      </section>

      <!-- Implementation Details -->
      <section class="space-y-4">
        <h2 class="text-2xl font-semibold text-foreground">How It Works</h2>
        <div class="bg-card text-card-foreground p-6 rounded-lg border border-border space-y-6">
          <div>
            <h3 class="font-semibold mb-2 text-lg">1. Polymorphic Component</h3>
            <p class="text-sm text-muted-foreground mb-3">
              Renders as <code class="bg-muted px-1 rounded">&lt;button&gt;</code> or <code class="bg-muted px-1 rounded">&lt;a&gt;</code> based on props
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`// Discriminated union types
type ButtonProps = BaseProps & {
  href?: never;
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
};

type LinkProps = BaseProps & {
  href: string;
  type?: never;
  disabled?: boolean; // Visual only
  target?: string;
  rel?: string;
};

// Component selection
const Component = href ? 'a' : 'button';`}</code></pre>
          </div>

          <div>
            <h3 class="font-semibold mb-2 text-lg">2. Security Features</h3>
            <p class="text-sm text-muted-foreground mb-3">
              Auto-adds <code class="bg-muted px-1 rounded">rel="noopener noreferrer"</code> for external links
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`// Security: Auto-add rel for target="_blank"
let finalRel = rel;
if (isLink && target === '_blank' && !rel) {
  finalRel = 'noopener noreferrer';
}`}</code></pre>
          </div>

          <div>
            <h3 class="font-semibold mb-2 text-lg">3. Accessibility</h3>
            <p class="text-sm text-muted-foreground mb-3">
              Disabled links use <code class="bg-muted px-1 rounded">aria-disabled</code> + <code class="bg-muted px-1 rounded">pointer-events-none</code>
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`// Links don't have native disabled
const ariaDisabled = isLink && disabled ? 'true' : undefined;
const tabIndex = isLink && disabled ? -1 : undefined;

/* CSS */
a.button[aria-disabled="true"] {
  --at-apply: pointer-events-none opacity-50 cursor-not-allowed;
}`}</code></pre>
          </div>
          
          <div>
            <h3 class="font-semibold mb-2 text-lg">4. Scoped Styles with --at-apply</h3>
            <p class="text-sm text-muted-foreground mb-3">
              UnoCSS utilities are applied via --at-apply directive
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`.button--primary {
  --at-apply: bg-primary text-primary-foreground
    hover:bg-primary-muted active:bg-primary
    shadow-sm;
}`}</code></pre>
          </div>
          
          <div>
            <h3 class="font-semibold mb-2 text-lg">5. Color System (config.ts + uno.config.ts)</h3>
            <p class="text-sm text-muted-foreground mb-3">
              Colors are defined in OKLCH format for better perceptual uniformity
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`colors: {
  primary: "oklch(0.2489 0.0697 36.95)",
  "primary-foreground": "oklch(0.9896 0.0186 96.86)",
  "primary-muted": "oklch(0.4249 0.0627 50.47)",
  // ... more colors
}`}</code></pre>
          </div>

          <div>
            <h3 class="font-semibold mb-2 text-lg">6. Dark Mode Support</h3>
            <p class="text-sm text-muted-foreground mb-3">
              Dark mode variants are configured via unocss-preset-theme
            </p>
            <pre class="text-sm overflow-x-auto bg-muted p-4 rounded"><code>{`presetTheme({
  theme: {
    dark: {
      colors: { ...dark }
    }
  }
})`}</code></pre>
          </div>
        </div>
      </section>
    </div>
  </main>
</Layout>
